
<!DOCTYPE html><html>
<head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8"/>
    
        <title>Python classes: basics beyond the absolute basics &mdash; Amit Saha: Technical Writings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='http://fonts.googleapis.com/css?family=Crete+Round' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../../_static/sphinx-bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css"/>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
        <script type="text/javascript">
            var DOCUMENTATION_OPTIONS = {
                URL_ROOT:'../../',
                VERSION:'1.0',
                COLLAPSE_INDEX:false,
                FILE_SUFFIX:'.html',
                HAS_SOURCE:  true
            };
        </script>
            <script type="text/javascript" src="../../_static/jquery.js"></script>
            <script type="text/javascript" src="../../_static/underscore.js"></script>
            <script type="text/javascript" src="../../_static/doctools.js"></script>
            <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
            <script type="text/javascript" src="../../_static/bootstrap-dropdown.js"></script>
        <link rel="top" title="Amit Saha: Technical Writings" href="../../index.html"/>
            <link rel="up" title="Programming" href="../../programming.html"/>
            <link rel="next" title="C/C++ Scientific Programming Libraries and Tools" href="../c_scientific/article.html"/>
            <link rel="prev" title="Data in C and CPython: A comparison" href="../data_python_c/data_c_python.html"/> 
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    
</head>
<body>

    <div class="navbar navbar-static-top">
        <div class="navbar-inner">
            <div class="container">

    <div class="related">
        <ul class="nav">
                <li class=""><a class="brand" href="../../index.html">Technical Writings</a></li>
                <li>
                    <a href="../../genindex.html"
                       title="General Index" accesskey="I">index</a>
                </li>
                <li>
                    <a href="../c_scientific/article.html"
                       title="C/C++ Scientific Programming Libraries and Tools" accesskey="N">next</a>
                </li>
                <li>
                    <a href="../data_python_c/data_c_python.html"
                       title="Data in C and CPython: A comparison" accesskey="P">previous</a>
                </li>
                <li><a href="../../programming.html"
                        accesskey="U">Programming</a>
                </li> 
        </ul>
    </div>
                <div class="pull-right">
                    
        <form class="navbar-search" action="../../search.html"
              method="get">
            <input type="text" name="q" placeholder="search"/>
            <input type="hidden" name="check_keywords" value="yes"/>
            <input type="hidden" name="area" value="default"/>
        </form>
                </div>
            </div>
        </div>
    </div>


<ul class="quick-links">
    <li><strong>Quick links</strong></li>
    <li class="divider">&middot;</li>
    <li class="follow-btn">
        <a href="https://twitter.com/echorand"
           class="twitter-follow-button" data-width="145px"
           data-link-color="#0069D6" data-show-count="false">Follow
            @echorand</a>
    </li>
    <li class="tweet-btn">
        <a href="https://twitter.com/share" class="twitter-share-button"
           data-count="horizontal"
           data-via="echorand"
           data-related="echorand:Creator of Technical Writings">Tweet</a>
    </li>
    <li class="plusone-container">
        <g:plusone size="medium"></g:plusone>
    </li>
</ul>  
    <div class="container">
        <div class="content row">
                <div class="span9">
                    
  <div class="section" id="python-classes-basics-beyond-the-absolute-basics">
<h1>Python classes: basics beyond the absolute basics<a class="headerlink" href="#python-classes-basics-beyond-the-absolute-basics" title="Permalink to this headline">¶</a></h1>
<p>In this article, I will discuss a couple of things about Python&#8217;s
classes assuming you know what the following does:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">point</span>
</pre></div>
</div>
<p>To refresh, we define a class <tt class="docutils literal"><span class="pre">Point</span></tt> which we will use to represent the
co-ordinates of a point in space. We can create an instance of this
class representing a point as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">p1</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>There are two things which you must note:</p>
<ul class="simple">
<li>I assume that that the point is in a three dimensional space</li>
<li>You describe the point as a <cite>tuple</cite> (no particular reason)</li>
</ul>
<p>And you can define <cite>methods</cite> to do stuff with these points (such as
finding the euclidean distance between two points, and such),
etc. You know all of that. Let&#8217;s start with the things you may not
know.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">I am using a Python 3 interactive session. The final program will
however work on both Python 2 and Python 3.</p>
</div>
<div class="section" id="informative-representation-of-your-point">
<h2>Informative representation of your point<a class="headerlink" href="#informative-representation-of-your-point" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s get back to creating the representation of a point using the
above class: <tt class="docutils literal"><span class="pre">p1=Point((1,2,3))</span></tt>. Let&#8217;s see what <tt class="docutils literal"><span class="pre">print(p1)</span></tt> gives us:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
<span class="go">&lt;__main__.Point object at 0x7fb123e67dd0&gt;</span>
</pre></div>
</div>
<p>So it tells us that <tt class="docutils literal"><span class="pre">p1</span></tt> is a Point object and few other things
which you can ignore. This is exactly what is, an object of <tt class="docutils literal"><span class="pre">Point</span></tt>
class, but <em>to</em> Python. What is it to you or your program&#8217;s user? It
is a point in space. Can we tell the user something more useful? We
sure can. We will have to define a special method, <tt class="docutils literal"><span class="pre">__str__()</span></tt> in
our class. This is how it will look after adding the method to <tt class="docutils literal"><span class="pre">class</span>
<span class="pre">Point</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">point</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;Point: {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">))</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">__str__()</span></tt> method above returns a string consisting of a string
representing the point (<tt class="docutils literal"><span class="pre">str(self.point)</span></tt>) and a word saying that
it&#8217;s a point. You may include any other helpful information you may
find relevant here. The only thing you have to keep in mind is that
the return value should be a string. Let&#8217;s try printing a point object
now:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
<span class="go">Point: (1, 2, 3)</span>
</pre></div>
</div>
<p>Much better isn&#8217;t it? Now your program&#8217;s user will have no problem in
understanding what <tt class="docutils literal"><span class="pre">p1</span></tt> is and also makes it easy for you to display
points in your program&#8217;s output.</p>
</div>
<div class="section" id="definining-custom-operators">
<h2>Definining custom operators<a class="headerlink" href="#definining-custom-operators" title="Permalink to this headline">¶</a></h2>
<p>One of the basic things that you may want to do when you are working
with points in space is find what is usually known as the euclidean
distance. To refresh, for two points, p1 and p2 having co-ordinates
(x1,y1,z1) and (x2,y2,z2), the distance is calculated as follows (in
Python speak) math.sqrt((x1-x2)**2 + (y1-y2)**2 + (z1-z2)**2) (where
<tt class="docutils literal"><span class="pre">math.sqrt</span></tt> is the square root function defined in the math
module). For our <tt class="docutils literal"><span class="pre">Point</span></tt> class, you could define a method to do this.
But, how about being able to do something like <tt class="docutils literal"><span class="pre">print(p1-p2)</span></tt> to
print the distance between the two? This also plays well with our
intuition of distance in 1 dimension (How far is 5 from 2? 5-2 =
3). Let&#8217;s try doing that with our current code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">=</span><span class="n">Point</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span><span class="o">=</span><span class="n">Point</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">p1</span><span class="o">-</span><span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
<p>Of course, Python doesn&#8217;t have any idea what you want it do when you
ask it to subtract p2 from p1. However, we can tell Python what to do
by adding a new method, <tt class="docutils literal"><span class="pre">__sub__()</span></tt>. After adding this method, the
class looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">point</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;Point: {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">s</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">x1</span><span class="p">,</span><span class="n">x2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">point</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>

        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">_sub__</span></tt> method basically calculates the euclidean distance and
returns it. The speciality of this method is that when you ask Python
to subtract something from an object of <tt class="docutils literal"><span class="pre">Point</span></tt> class, it calls this
method and the return value of this method is returned as the result
of the subtraction operation. If you are curious as to which is
<tt class="docutils literal"><span class="pre">self</span></tt> and which is <tt class="docutils literal"><span class="pre">other</span></tt> in <tt class="docutils literal"><span class="pre">__sub__()</span></tt> when you ask Python
to evaluate: <tt class="docutils literal"><span class="pre">p1-p2</span></tt>, <tt class="docutils literal"><span class="pre">self</span></tt> refers to <tt class="docutils literal"><span class="pre">p1</span></tt> and other refers to <tt class="docutils literal"><span class="pre">p2</span></tt>.</p>
<p>Let&#8217;s now try subtracting <tt class="docutils literal"><span class="pre">p2</span></tt> from <tt class="docutils literal"><span class="pre">p1</span></tt> again:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">=</span><span class="n">Point</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span><span class="o">=</span><span class="n">Point</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">-</span><span class="n">p2</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span><span class="o">=</span><span class="n">Point</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span><span class="o">-</span><span class="n">p2</span>
<span class="go">1.0</span>
</pre></div>
</div>
<p>So, you have basically defined the subtraction operator for objects of
your <tt class="docutils literal"><span class="pre">Point</span></tt> class. Can you define other mathematical operators in
such a fashion? Sure. Learn all about it <a class="reference external" href="http://docs.python.org/2/reference/datamodel.html#emulating-numeric-types">here</a>.</p>
<p>Here is the complete program (works with both Python 2 and 3):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">math</span>

<span class="k">class</span> <span class="nc">Point</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">point</span> <span class="o">=</span> <span class="n">point</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;Point: {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="n">s</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">for</span> <span class="n">x1</span><span class="p">,</span><span class="n">x2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">point</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">point</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>

        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>You may want to add the logic to your <tt class="docutils literal"><span class="pre">__sub__()</span></tt> method
so that it checks if the points are of the same dimension. If not,
then print a nice error message instead of printing a traceback.
That&#8217;s it.</p>
</div>
</div>


                    
                        <div id="disqus_thread"></div>
                        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                    
                </div>
                <div class="span3">
                    
        <div class="sphinxsidebar">
            <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Python classes: basics beyond the absolute basics</a><ul>
<li><a class="reference internal" href="#informative-representation-of-your-point">Informative representation of your point</a></li>
<li><a class="reference internal" href="#definining-custom-operators">Definining custom operators</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../data_python_c/data_c_python.html"
                        title="previous chapter">Data in C and CPython: A comparison</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../c_scientific/article.html"
                        title="next chapter">C/C++ Scientific Programming Libraries and Tools</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/articles/python_custom_class/article.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
            </div>
        </div>
                </div>
            
        </div>
    </div>
    <div class="footer">
        
        <div class="container">
                    &copy;
                        Copyright 2013, Amit Saha.
                Last updated
                    on Jun 22, 2013.
                Created using <a
                        href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3
                    .
                Theme <a href="https://github.com/scotch/sphinx-bootstrap">Sphinx-Bootstrap</a>
                adapted from
                <a href="http://twitter.github.com/bootstrap/">Twitter's
                    Bootstrap</a> by <a href="http://www.scotchmedia.com">Scotch
                Media</a>
        </div>
    </div>


    <!-- disqus -->
    <script type="text/javascript">
        var disqus_title = 'Python classes: basics beyond the absolute basics &mdash; Amit Saha: Technical Writings';
        var disqus_identifier ='code' + '.' + "echorand" + window.location.pathname.replace('/', '.');
    </script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "echorand"; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


<script type="text/javascript">
    $('.nav .active').on('click', function () {
        e.preventDefault()
        $(this).siblings().toggle()
    });
</script>

<!-- plusone -->
<script type="text/javascript">
    (function () {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>

<!-- twitter -->
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>

</body>
</html>